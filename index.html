<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4a7c2c">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Agr√≠cola - Ma√≠z y Cacahuate</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <!-- Login View -->
    <div id="login-view" class="login-container">
        <div class="login-box">
            <div class="login-icon">üåæ</div>
            <h1>Sistema Agr√≠cola</h1>
            <p class="subtitle">Gesti√≥n de Peso - Ma√≠z y Cacahuate</p>
            <form id="login-form" autocomplete="off">
                <input type="text" id="username" placeholder="Usuario" required>
                <input type="password" id="password" placeholder="Contrase√±a" required>
                <button type="submit">Ingresar</button>

                <button type="button" id="login-theme-toggle" class="btn-logout" style="margin-top:10px;">
                    üåì Modo Oscuro
                </button>

                <p class="demo-info">Demo: admin / admin123</p>
            </form>
        </div>
    </div>

    <!-- Main App View -->
    <div id="app-view" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üåæ</span>
                    <div>
                        <h1>Sistema Agr√≠cola</h1>
                        <p>Ma√≠z y Cacahuate</p>
                    </div>
                </div>
                <div class="user-info">
                    <span>Hola, <strong id="user-name">Administrador</strong></span>
                    <button id="toggle-theme" class="btn-logout">üåì Modo Oscuro</button>
                    <button onclick="cerrarSesion()" class="btn-logout">Salir</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <button class="nav-item active" data-view="clientes" onclick="cambiarVista('clientes')">üë• Clientes</button>
            <button class="nav-item" data-view="registros" onclick="cambiarVista('registros')">‚öñÔ∏è Registros de Peso</button>
        </nav>

        <!-- Alerts -->
        <div id="alerts"></div>

        <!-- Clientes View -->
        <div id="view-clientes" class="view-content visible">
            <div class="stats">
                <div class="stat-card">
                    <span class="stat-label">Total Clientes</span>
                    <span class="stat-value" id="client-count">0</span>
                </div>
            </div>

            <div class="content-grid">
                <!-- Form Nuevo Cliente -->
                <div class="card">
                    <div class="card-header">
                        <h3>‚ûï Nuevo Cliente</h3>
                        <p>Registra un nuevo cliente</p>
                    </div>
                    <form id="form-cliente">
                        <label>Nombre</label>
                        <input type="text" name="nombre" placeholder="Nombre" required>
                        
                        <label>Apellidos</label>
                        <input type="text" name="apellidos" placeholder="Apellidos" required>
                        
                        <label>Tel√©fono</label>
                        <input type="text" name="telefono" placeholder="555-0000" required>
                        
                        <button type="submit" class="btn-primary">Guardar Cliente</button>
                    </form>

                    <!-- ======== FORMULARIO EDITAR CLIENTE ======== -->
                    <div class="card" style="margin-top: 20px;">
                        <div class="card-header">
                            <h3>‚úèÔ∏è Modificar Cliente</h3>
                            <p>Edita los datos de un cliente existente</p>
                        </div>
                        <form id="form-editar-cliente">
                            <label>Seleccionar cliente</label>
                            <select id="editarClienteSelect" required>
                                <option value="">Seleccionar cliente</option>
                            </select>

                            <label>Nombre</label>
                            <input type="text" id="editarNombre" placeholder="Nombre" required>

                            <label>Apellidos</label>
                            <input type="text" id="editarApellidos" placeholder="Apellidos" required>

                            <label>Tel√©fono</label>
                            <input type="text" id="editarTelefono" placeholder="555-0000" required>

                            <button type="submit" class="btn-primary">Guardar Cambios</button>
                        </form>
                    </div>
                </div>

                <!-- Lista de Clientes -->
                <div class="card card-wide">
                    <div class="card-header">
                        <h3>Lista de Clientes</h3>
                        <input type="text" id="search-clientes" placeholder="üîç Buscar cliente..." class="search-input">
                    </div>
                    <div id="lista-clientes" class="list-container"></div>
                </div>
            </div>
        </div>

        <!-- Registros View -->
        <div id="view-registros" class="view-content">
            <div class="stats">
                <div class="stat-card">
                    <span class="stat-label">Total Registros</span>
                    <span class="stat-value" id="registros-count">0</span>
                </div>
                <div class="stat-card stat-amber">
                    <span class="stat-label">Peso Neto Total</span>
                    <span class="stat-value" id="peso-total">0.00 kg</span>
                </div>
                <div class="stat-card stat-emerald">
                    <span class="stat-label">Promedio</span>
                    <span class="stat-value" id="peso-promedio">0.00 kg</span>
                </div>
            </div>

            <div class="content-grid">
                <!-- Form Registro -->
                <div class="card">
                    <div class="card-header">
                        <h3>‚ûï Nuevo Registro</h3>
                        <p>Registra un nuevo pesaje</p>
                    </div>
                    <form id="form-registro">
                        <label>Cliente</label>
                        <select name="clienteId" id="clienteSelect" required>
                            <option value="">Seleccionar cliente</option>
                        </select>
                        
                        <label>Producto</label>
                        <select name="producto" required>
                            <option value="Ma√≠z">Ma√≠z</option>
                            <option value="Cacahuate">Cacahuate</option>
                        </select>
                        
                        <label>Peso Total (kg)</label>
                        <input type="number" name="pesoTotal" step="0.01" placeholder="15000.00" required>
                        
                        <label>Peso Cami√≥n (kg)</label>
                        <input type="number" name="pesoCamion" step="0.01" placeholder="8000.00" required>
                        
                        <label>Peso Neto (kg)</label>
                        <input type="number" name="pesoNeto" step="0.01" readonly class="neto-input" value="0.00">
                        
                        <button type="submit" class="btn-primary">Guardar Registro</button>
                    </form>
                </div>

                <!-- Lista Registros -->
                <div class="card card-wide">
                    <div class="card-header">
                        <h3>Lista de Registros</h3>
                    </div>
                    <div class="filters">
                        <input type="text" id="search-registros" placeholder="üîç Buscar registro..." class="search-input">
                        <select id="filter-producto" class="filter-select">
                            <option value="todos">Todos los productos</option>
                            <option value="Ma√≠z">Solo Ma√≠z</option>
                            <option value="Cacahuate">Solo Cacahuate</option>
                        </select>
                    </div>
                    <div id="lista-registros" class="list-container"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="logica.js"></script>
    <script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js')
    .then(() => console.log('Service Worker registrado correctamente.'))
    .catch(err => console.error('Error al registrar el Service Worker:', err));
}
</script>

</body>
</html>
